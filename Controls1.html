<!DOCTYPE html>
<html>
    <head>
        <title>Three.js TypeScript Tutorials by Sean Bradley : https://sbcode.net/threejs</title>
        <link rel="stylesheet" href="/stylesheets/style.css" />
        <style>
            body {
                overflow: hidden;
                margin: 0px;
            }

            #instructions {
                color: white;
                position: absolute;
                left: 50%;
                top: 10px;
                margin-left: -120px;
                font-family: monospace;
            }
        </style>
        <!-- Import maps polyfill -->
        <!-- Remove this when import maps will be widely supported -->
        <script async src="./utils/es-module-shims.js"></script>

        <script type="importmap">
            {
                "imports": {
                    "three": "../three.module1.js"
                }
            }
        </script>
    </head>

    <body>
        <a href="/view_source/transformcontrols.html" id="vwSrcLink" target="_blank">&lt;&gt;</a>
        <div id="instructions">
            G : Move&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R : Rotate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S : Scale
        </div>
        <script type="module">
            import * as THREE from 'three'
            import { TransformControls } from '../TransformControls.js';

            const scene = new THREE.Scene()
            //const axesHelper = new THREE.AxesHelper(5)
            //scene.add(axesHelper)
            const camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000)
            // Create the camera
            // let HEIGHT = window.innerHeight;
            // let WIDTH = window.innerWidth;
            // var aspectRatio = WIDTH / HEIGHT;
            // var fieldOfView = 40;
            // var nearPlane = 5;
            // var farPlane = 1000;
            // var camera = new THREE.PerspectiveCamera(
            //     fieldOfView,
            //     aspectRatio,
            //     nearPlane,
            //     farPlane
            // );
            const renderer = new THREE.WebGLRenderer()
            renderer.setSize(window.innerWidth, window.innerHeight)
            document.body.appendChild(renderer.domElement)
            renderer.domElement.ondragstart = function (event) {
                event.preventDefault()
                return false
            }
            const geometry = new THREE.PlaneGeometry(0.5, 0.5)
            const material = new THREE.MeshBasicMaterial( { color: 0x9b1c1c,
                side: THREE.DoubleSide} );
            const cube = new THREE.Mesh(geometry, material)
            cube.position.set(0.0, 0.0, 0.0);
            // cube.position.set(-7.0, -44.5, 30);
            // cube.scale.set(1.35, 0.65, 0.5);
            scene.add(cube)
            const controls = new TransformControls(camera, renderer.domElement)
            controls.attach(cube)
            scene.add(controls)
            document.addEventListener('keydown', function (event) {
                switch (event.key) {
                    case 'g':
                        controls.setMode('translate')
                        break
                    // case 'r':
                    //     controls.setMode('rotate')
                    //     break
                    case 's':
                        controls.setMode('scale')
                        break
                }
            })
            camera.position.z = 2.5
            // camera.position.x = 0;
            // camera.position.y = -60;
            // camera.position.z = 50;

            var animate = function () {
                requestAnimationFrame(animate)
                render()
            }
            function render() {
                renderer.render(scene, camera)
            }
            animate()
        </script>
    </body>
</html>
